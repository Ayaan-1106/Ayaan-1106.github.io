"use strict";(self["webpackChunkvue_cli"]=self["webpackChunkvue_cli"]||[]).push([[594],{7946:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var r=s(6768);const n={class:"my-page"};function a(e,t,s,a,u,o){const l=(0,r.g2)("UserProfile"),i=(0,r.g2)("StudyList"),d=(0,r.g2)("UserRatingList");return(0,r.uX)(),(0,r.CE)("div",n,[(0,r.bF)(l,{user:u.user},null,8,["user"]),(0,r.bF)(i,{studies:u.activeStudies,title:"참여중인 스터디 목록",onSelectStudy:o.selectStudy,onGoToStudy:o.goToStudy,"selected-study":u.selectedStudy,showRateButton:!1,currentUserId:e.getUserId},null,8,["studies","onSelectStudy","onGoToStudy","selected-study","currentUserId"]),(0,r.bF)(i,{studies:u.completedStudies,title:"종료된 스터디 목록",onSelectStudy:o.selectStudy,onGoToStudy:o.goToStudy,"selected-study":u.selectedStudy,showRateButton:!0,currentUserId:e.getUserId},null,8,["studies","onSelectStudy","onGoToStudy","selected-study","currentUserId"]),(0,r.bF)(d,{user:u.user},null,8,["user"])])}s(4114);var u=s(4232);const o={class:"user-profile section"};function l(e,t,s,n,a,l){return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("h2",null,(0,u.v_)(a.username)+"의 정보",1),(0,r.Lk)("p",null,[(0,r.eW)("나이: "),(0,r.Lk)("strong",null,(0,u.v_)(a.age),1)]),(0,r.Lk)("p",null,[(0,r.eW)("email: "),(0,r.Lk)("strong",null,(0,u.v_)(a.email),1)]),(0,r.Lk)("p",null,[(0,r.eW)("Rating: "),(0,r.Lk)("strong",null,(0,u.v_)(a.rating),1)])])}var i={name:"UserProfile",data(){return{username:"",rating:3.3,age:10,email:""}},created(){this.getUserInfo()},methods:{getUserInfo(){const e=this.$route.params.userId;this.$axios.get(this.$serverUrl+`/api/userinfo/${e}`).then((e=>{this.username=e.data.username,this.rating=e.data.rating,this.age=e.data.age,this.email=e.data.email})).catch((e=>{console.log(e)}))}}},d=s(1241);const c=(0,d.A)(i,[["render",l],["__scopeId","data-v-6a42b014"]]);var m=c;const g={class:"study-list section"},h=["onClick"],y=["onClick"],p={key:0,class:"member-list-box"};function S(e,t,s,n,a,o){const l=(0,r.g2)("StudyMemberList");return(0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("h4",null,(0,u.v_)(s.title),1),(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.studies,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.studyId,class:(0,u.C4)(["study-item",{selected:e.studyId===s.selectedStudy?.studyId}])},[(0,r.Lk)("div",{onClick:t=>o.selectStudy(e)},(0,u.v_)(e.studyName),9,h),(0,r.Lk)("button",{onClick:t=>o.goToStudy(e.studyId),class:"study-button"},"게시글로 이동",8,y),e.studyId===s.selectedStudy?.studyId?((0,r.uX)(),(0,r.CE)("div",p,[(0,r.bF)(l,{members:e.participants,showRateButton:s.showRateButton,studyId:e.studyId,onSelectMember:o.selectMember},null,8,["members","showRateButton","studyId","onSelectMember"])])):(0,r.Q3)("",!0)],2)))),128))])])}var b=s(5130);const v={class:"study-member-list"},k=["onClick"],I=["onClick"],L={key:0,class:"modal"},C={class:"modal-content"};function M(e,t,s,n,a,o){return(0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.members,(t=>((0,r.uX)(),(0,r.CE)("li",{key:t.id,class:"member-item"},[(0,r.Lk)("div",{onClick:e=>o.selectMember(t)},(0,u.v_)(t.username),9,k),s.showRateButton&&t.userId!==e.userData.userId?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:e=>o.openRatingModal(t),class:"rate-button"},"평가하기",8,I)):(0,r.Q3)("",!0)])))),128))]),a.showRatingModal?((0,r.uX)(),(0,r.CE)("div",L,[(0,r.Lk)("div",C,[(0,r.Lk)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>o.closeRatingModal&&o.closeRatingModal(...e))},"×"),(0,r.Lk)("h4",null,(0,u.v_)(a.ratingMember.username)+"님 평가",1),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.ratingScore=e),type:"number",min:"0",max:"5",placeholder:"점수 (0-5)",onInput:t[2]||(t[2]=(...e)=>o.validateScore&&o.validateScore(...e)),class:"input-field"},null,544),[[b.Jo,a.ratingScore,void 0,{number:!0}]]),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.ratingContent=e),placeholder:"평가 내용을 입력하세요",class:"input-field"},null,512),[[b.Jo,a.ratingContent]]),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>o.rateMember&&o.rateMember(...e)),class:"submit-button"},"제출")])])):(0,r.Q3)("",!0)])}var f=s(8355),U=s(782),R={name:"StudyMemberList",props:{members:{type:Array,required:!0},showRateButton:{type:Boolean,default:!0},studyId:{type:Number,required:!0}},data(){return{showRatingModal:!1,ratingMember:null,ratingScore:"",ratingContent:""}},computed:{...(0,U.aH)(["userData"])},methods:{selectMember(e){this.$emit("select-member",e)},openRatingModal(e){this.ratingMember=e,this.showRatingModal=!0},closeRatingModal(){this.showRatingModal=!1,this.ratingScore="",this.ratingContent=""},validateScore(){this.ratingScore<0?this.ratingScore=0:this.ratingScore>5&&(this.ratingScore=5)},rateMember(){if(this.ratingScore<0||this.ratingScore>5)return void alert("점수는 0과 5 사이여야 합니다.");const e=localStorage.getItem("accessToken"),t={userId:this.ratingMember.userId,studyId:this.studyId,score:this.ratingScore,content:this.ratingContent};console.log("서버에 보낼 데이터",t),f.A.post(`${this.$serverUrl}/api/user-ratings`,t,{headers:{Authorization:`Bearer ${e}`}}).then((e=>{console.log(e),this.closeRatingModal()})).catch((e=>{console.error("평가 저장 에러 발생:",e)}))}}};const _=(0,d.A)(R,[["render",M],["__scopeId","data-v-7a6b9b20"]]);var $=_,E={name:"StudyList",components:{StudyMemberList:$},props:{studies:{type:Array,required:!0},title:{type:String,required:!0},selectedStudy:{type:Object,default:null},showRateButton:{type:Boolean,default:!0}},methods:{selectStudy(e){this.$emit("select-study",e)},goToStudy(e){this.$emit("go-to-study",e)},selectMember(e){this.$emit("select-member",e)}}};const X=(0,d.A)(E,[["render",S],["__scopeId","data-v-9d550ee2"]]);var w=X;const B=e=>((0,r.Qi)("data-v-726722e6"),e=e(),(0,r.jt)(),e),A={class:"user-rating-list"},T={key:0},F=B((()=>(0,r.Lk)("strong",null,null,-1))),q=B((()=>(0,r.Lk)("strong",null,"점수:",-1))),x=B((()=>(0,r.Lk)("strong",null,"내용:",-1))),W={key:1},G=B((()=>(0,r.Lk)("p",null,"아직 평가가 없습니다.",-1))),K=[G];function P(e,t,s,n,a,o){return(0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("h3",null,(0,u.v_)(s.user.name)+"님이 받은 평가",1),a.ratings.length?((0,r.uX)(),(0,r.CE)("div",T,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.ratings,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.studyId,class:"rating-item"},[(0,r.Lk)("p",null,[F,(0,r.eW)(" "+(0,u.v_)(e.studyName),1)]),(0,r.Lk)("p",null,[q,((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.score,(e=>((0,r.uX)(),(0,r.CE)("span",{key:e},"⭐")))),128))]),(0,r.Lk)("p",null,[x,(0,r.eW)(" "+(0,u.v_)(e.content),1)])])))),128))])):((0,r.uX)(),(0,r.CE)("div",W,K))])}var Q={name:"UserRatingList",props:{user:{type:Object,required:!0}},data(){return{ratings:[]}},created(){this.fetchUserRatings()},computed:{...(0,U.L8)(["getUserId"])},methods:{fetchUserRatings(){const e=this.$route.params.userId;f.A.get(this.$serverUrl+`/api/user-ratings/${e}`).then((e=>{this.ratings=e.data,console.log("평가 데이터 불러오기 성공",e.data)})).catch((e=>{console.error("평가 데이터를 불러오는 중 오류 발생:",e)}))}}};const j=(0,d.A)(Q,[["render",P],["__scopeId","data-v-726722e6"]]);var N=j,D={name:"MyPage",components:{UserProfile:m,StudyList:w,StudyMemberList:$,UserRatingList:N},data(){return{user:{id:this.$route.params.userId,name:"",rating:4.5},activeStudies:[],completedStudies:[],selectedStudy:null,selectedMember:null}},mounted(){this.getUserStudyInfo()},methods:{selectStudy(e){this.selectedStudy=e,this.selectedMember=null},selectMember(e){this.selectedMember=e},goToStudy(e){this.$router.push({path:`/board/${e}`})},getUserStudyInfo(){const e=this.$route.params.userId;console.log("userId",e),this.$axios.get(this.$serverUrl+`/api/userinfo/${e}`).then((e=>{console.log("getUserStudyInfo",e);const{username:t,availableStudyList:s,unavailableStudyList:r}=e.data;this.user.name=t,this.activeStudies=s,this.completedStudies=r})).catch((e=>{console.log(e)}))}}};const J=(0,d.A)(D,[["render",a],["__scopeId","data-v-d2cf07b2"]]);var O=J}}]);
//# sourceMappingURL=about.cb73f407.js.map